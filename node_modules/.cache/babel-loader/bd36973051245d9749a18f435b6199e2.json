{"ast":null,"code":"import _defineProperty from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Redirect}from\"react-router-dom\";import Layout from\"../core/Layout\";import{signin,authenticate,isAuthenticated}from\"../auth\";import{helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Signin=function Signin(){var _useState=useState({email:\"\",password:\"\",error:\"\",loading:false,redirectToReferrer:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var email=values.email,password=values.password,error=values.error,loading=values.loading,redirectToReferrer=values.redirectToReferrer;var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user;var handleChange=function handleChange(Name){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},Name,event.target.value)));};};var clickSubmit=function clickSubmit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{error:false,loading:true}));signin({email:email,password:password}).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error,loading:false}));}else{authenticate(data,function(){setValues(_objectSpread(_objectSpread({},values),{},{redirectToReferrer:true}));});}});};var signUpForm=function signUpForm(){return/*#__PURE__*/_jsxs(\"form\",{style:{margin:\"20px\",backgroundColor:\"black\",padding:\"20px\",borderRadius:\"7px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-3\",style:{color:\"white\",fontSize:\"20px\"},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Signin Form\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:\"white\"},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange(\"email\"),type:\"email\",className:\"form-control\",value:email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:\"white\"},children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange(\"password\"),type:\"password\",className:\"form-control\",value:password})]}),/*#__PURE__*/_jsx(\"button\",{onClick:clickSubmit,type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})]});};var showError=function showError(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",style:{display:error?\"\":\"none\"},children:error});};var showLoading=function showLoading(){return loading&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Loading...\"})});};var redirectUser=function redirectUser(){if(redirectToReferrer){if(user&&user.role===1){return/*#__PURE__*/_jsx(Redirect,{to:\"/admin/dashboard\"});}else{return/*#__PURE__*/_jsx(Redirect,{to:\"/user/dashboard\"});}}};return/*#__PURE__*/_jsxs(Layout,{title:\"Signin page\",description:\"Signin to node js app\",className:\"container col-md-4 offset-md-4\",children:[/*#__PURE__*/_jsxs(\"helmet\",{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Signin\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Please Sign in to continue\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"keywords\",content:\"Signin to ecommerce site, buy products\"})]}),redirectUser(),showLoading(),showError(),signUpForm()]});};export default Signin;","map":{"version":3,"sources":["C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/src/user/Signin.js"],"names":["React","useState","Redirect","Layout","signin","authenticate","isAuthenticated","helmet","Signin","email","password","error","loading","redirectToReferrer","values","setValues","user","handleChange","Name","event","target","value","clickSubmit","preventDefault","then","data","signUpForm","margin","backgroundColor","padding","borderRadius","color","fontSize","showError","display","showLoading","redirectUser","role"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport Layout from \"../core/Layout\"\r\nimport { signin, authenticate, isAuthenticated } from \"../auth\"\r\nimport { helmet } from \"react-helmet\"\r\n\r\nconst Signin = () =>{\r\n\t\r\n\r\n\tconst [values, setValues] = useState({\r\n\t\t\temail: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\terror: \"\",\r\n\t\t\tloading: false,\r\n\t\t\tredirectToReferrer: false\r\n\t})\r\n\r\n\t\t const { email, password, error, loading, redirectToReferrer } = values;\r\n\t\t const {user} = isAuthenticated();\r\n\r\n\r\n\t\tconst handleChange = Name => event => {\r\n\t\t\tsetValues({...values, error: false, [Name]: event.target.value})\r\n\t\t}\r\n\t\t\r\n\r\n\t\tconst clickSubmit = event =>{\r\n\t\t \tevent.preventDefault()\r\n\t\t \tsetValues({...values, error: false, loading: true})\r\n\t\t\tsignin({ email, password })\r\n\t\t\t\t.then(data =>{\r\n\t\t\t\t\tif(data.error){\r\n\t\t\t\t\t\tsetValues({...values, error: data.error, loading: false })\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tauthenticate(data, ()=>{\r\n\t\t\t\t\t\t\tsetValues({\r\n\t\t\t\t\t\t\t\t...values, \r\n\t\t\t\t\t\t\t\tredirectToReferrer: true\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t \t}\r\n\r\n\t \t\t\r\n\r\n\tconst signUpForm = () =>(\r\n\r\n\t\t<form style={{margin: \"20px\", backgroundColor:\"black\", padding: \"20px\", borderRadius: \"7px\"}}>\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"text-center mb-3\" style={{color: \"white\", fontSize: \"20px\"}}><strong>Signin Form</strong></div>\r\n\t\t\t\t  <div className=\"mb-3\">\r\n\t\t\t\t\t    <label className=\"form-label\" style={{color: \"white\"}}>Email</label>\r\n\t\t\t\t\t    <input onChange={handleChange(\"email\")} type=\"email\" className=\"form-control\" value={email} />\r\n\t\t\t\t  </div>\r\n\r\n\t\t\t\t  <div className=\"mb-3\">\r\n\t\t\t\t\t    <label className=\"form-label\" style={{color: \"white\"}}>Password</label>\r\n\t\t\t\t\t    <input onChange={handleChange(\"password\")} type=\"password\" className=\"form-control\"  value={password}/>\r\n\t\t\t\t  </div>\r\n\r\n\t\t\t\t  <button onClick={clickSubmit} type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n\t\t</form>\r\n\r\n\r\n\t);\r\n\r\n\tconst showError = () =>(\r\n\t \t<div className=\"alert alert-danger\" style={{display: error ? \"\" : \"none\" }}>{error}</div>\r\n\t)\r\n\r\n\tconst showLoading = () =>(\r\n\t \tloading && (<div className=\"alert alert-info\"><strong>Loading...</strong></div>)\r\n\t)\r\n\r\n\tconst redirectUser = () =>{\r\n\t\tif(redirectToReferrer){\r\n\t\t\tif(user && user.role === 1){\r\n\t\t\t\treturn <Redirect to=\"/admin/dashboard\" />\r\n\t\t\t} else{\r\n\t\t\t\treturn <Redirect to=\"/user/dashboard\" />\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn(\r\n\t\t<Layout \r\n\t\t\ttitle=\"Signin page\" \r\n\t\t\tdescription=\"Signin to node js app\"\r\n\t\t\tclassName=\"container col-md-4 offset-md-4\"\r\n\t\t>\r\n\t\t\t<helmet>\r\n\t\t\t\t<title>Signin</title>\r\n\t\t\t\t<meta \r\n\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\tcontent=\"Please Sign in to continue\"  \r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<meta \r\n\t\t\t\t\tname=\"keywords\"\r\n\t\t\t\t\tcontent=\"Signin to ecommerce site, buy products\"  \r\n\t\t\t\t/>\r\n\t\t\t</helmet>\r\n\t\t\t{redirectUser()}\r\n\t\t\t{showLoading()}\r\n\t\t\t{showError()}\r\n\t\t\t{signUpForm()}\r\n\t\t</Layout>\r\n\t)\r\n\r\n}\r\n\r\n\r\nexport default Signin"]},"metadata":{},"sourceType":"module"}