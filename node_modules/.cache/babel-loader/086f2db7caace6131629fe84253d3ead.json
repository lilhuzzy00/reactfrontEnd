{"ast":null,"code":"import _objectSpread from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import Layout from\"./Layout\";import{getCategories,getFilteredProducts}from\"./ApiCore\";import Checkbox from\"./Checkbox\";import RadioBox from\"./RadioBox\";import{prices}from\"./FixedPrices\";import Card from\"./Card\";import\"./Shop.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){var _useState=useState({filters:{categories:[],price:[]}}),_useState2=_slicedToArray(_useState,2),myFilters=_useState2[0],setMyFilter=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),skip=_useState8[0],setSkip=_useState8[1];var _useState9=useState(6),_useState10=_slicedToArray(_useState9,2),limit=_useState10[0],setLimit=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),filteredResults=_useState12[0],setFilteredResults=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),size=_useState14[0],setSize=_useState14[1];var init=function init(){getCategories().then(function(data){if(error.data){setError(error.data);}else{setCategories(data);}});};var loadFilteredResults=function loadFilteredResults(newFilters){getFilteredProducts(skip,limit,newFilters).then(function(data){if(data.error){setError(data.error);}else{setFilteredResults(data.data);setSize(data.size);setSkip(0);}});};var loadMore=function loadMore(newFilters){var toSkip=skip+limit;getFilteredProducts(toSkip,limit,myFilters.filters).then(function(data){if(data.error){setError(data.error);}else{setFilteredResults([].concat(_toConsumableArray(filteredResults),_toConsumableArray(data.data)));setSize(data.size);setSkip(toSkip);}});};var loadMoreButton=function loadMoreButton(){return size>0&&size>=limit&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:loadMore,children:\"Load More\"});};useEffect(function(){init();loadFilteredResults(skip,limit,myFilters.filters);},[]);var _handleFilters=function handleFilters(filters,filterBy){// console.log(\"SHOP\", filters, FilterBy)\nvar newFilters=_objectSpread({},myFilters);newFilters.filters[filterBy]=filters;if(filterBy==\"price\"){var priceValues=handlePrice(filters);newFilters.filters[filterBy]=priceValues;}loadFilteredResults(myFilters.filters);setMyFilter(newFilters);};var handlePrice=function handlePrice(value){var data=prices;var array=[];for(var key in data){if(data[key]._id===parseInt(value)){array=data[key].array;}}return array;};return/*#__PURE__*/_jsxs(Layout,{title:\"Homepage\",description:\"Node js Ecommerce App\",children:[/*#__PURE__*/_jsxs(\"helmet\",{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Shop page\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Make shopping here\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"keywords\",content:\"Choose from our list of products and shop. Buy Shoes, Bags, Shirts, Underwears, Polo Jeans \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ShopRow\",style:{backgroundColor:\"white\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"ShopRow1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filterDiv\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:\"27px\"},children:\"Filter By Categories\"}),/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(Checkbox,{categories:categories,handleFilters:function handleFilters(filters){return _handleFilters(filters,\"category\");}})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:\"27px\"},children:\"Filter By Price\"}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"30px\"},children:/*#__PURE__*/_jsx(RadioBox,{prices:prices,handleFilters:function handleFilters(filters){return _handleFilters(filters,\"price\");}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardRow\",children:[filteredResults.map(function(product,i){return/*#__PURE__*/_jsx(\"div\",{className:\"cardRow2\",children:/*#__PURE__*/_jsx(Card,{product:product},i)});}),loadMoreButton()]})]})})]});};export default Shop;","map":{"version":3,"sources":["C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/src/core/Shop.js"],"names":["React","useState","useEffect","Link","Layout","getCategories","getFilteredProducts","Checkbox","RadioBox","prices","Card","Shop","filters","categories","price","myFilters","setMyFilter","setCategories","error","setError","skip","setSkip","limit","setLimit","filteredResults","setFilteredResults","size","setSize","init","then","data","loadFilteredResults","newFilters","loadMore","toSkip","loadMoreButton","handleFilters","filterBy","priceValues","handlePrice","value","array","key","_id","parseInt","backgroundColor","fontSize","paddingLeft","map","product","i"],"mappings":"ueAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAAQC,aAAR,CAAuBC,mBAAvB,KAAiD,WAAjD,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,OAAQC,MAAR,KAAqB,eAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAO,YAAP,C,wFAIA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAK,CACjB,cAAiCV,QAAQ,CAAC,CACzCW,OAAO,CAAE,CACRC,UAAU,CAAE,EADJ,CAERC,KAAK,CAAE,EAFC,CADgC,CAAD,CAAzC,wCAAOC,SAAP,eAAkBC,WAAlB,eAMA,eAAoCf,QAAQ,CAAC,EAAD,CAA5C,yCAAOY,UAAP,eAAmBI,aAAnB,eACA,eAA0BhB,QAAQ,CAAC,KAAD,CAAlC,yCAAOiB,KAAP,eAAcC,QAAd,eACA,eAAwBlB,QAAQ,CAAC,CAAD,CAAhC,yCAAOmB,IAAP,eAAaC,OAAb,eACA,eAA0BpB,QAAQ,CAAC,CAAD,CAAlC,0CAAOqB,KAAP,gBAAcC,QAAd,gBACA,gBAA8CtB,QAAQ,CAAC,EAAD,CAAtD,2CAAOuB,eAAP,gBAAwBC,kBAAxB,gBACA,gBAAwBxB,QAAQ,CAAC,CAAD,CAAhC,2CAAOyB,IAAP,gBAAaC,OAAb,gBAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CAClBvB,aAAa,GACXwB,IADF,CACO,SAAAC,IAAI,CAAG,CACZ,GAAGZ,KAAK,CAACY,IAAT,CAAc,CACbX,QAAQ,CAACD,KAAK,CAACY,IAAP,CAAR,CACA,CAFD,IAEO,CACNb,aAAa,CAACa,IAAD,CAAb,CACA,CACD,CAPF,EAQA,CATD,CAWA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAAAC,UAAU,CAAG,CACxC1B,mBAAmB,CAACc,IAAD,CAAOE,KAAP,CAAcU,UAAd,CAAnB,CACEH,IADF,CACO,SAAAC,IAAI,CAAG,CACZ,GAAGA,IAAI,CAACZ,KAAR,CAAc,CACbC,QAAQ,CAACW,IAAI,CAACZ,KAAN,CAAR,CACA,CAFD,IAEO,CACNO,kBAAkB,CAACK,IAAI,CAACA,IAAN,CAAlB,CACAH,OAAO,CAACG,IAAI,CAACJ,IAAN,CAAP,CACAL,OAAO,CAAC,CAAD,CAAP,CACA,CACD,CATF,EAUA,CAXD,CAeA,GAAMY,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAD,UAAU,CAAG,CAC7B,GAAIE,CAAAA,MAAM,CAAGd,IAAI,CAAGE,KAApB,CACAhB,mBAAmB,CAAC4B,MAAD,CAASZ,KAAT,CAAgBP,SAAS,CAACH,OAA1B,CAAnB,CACEiB,IADF,CACO,SAAAC,IAAI,CAAG,CACZ,GAAGA,IAAI,CAACZ,KAAR,CAAc,CACbC,QAAQ,CAACW,IAAI,CAACZ,KAAN,CAAR,CACA,CAFD,IAEO,CACNO,kBAAkB,8BAAKD,eAAL,qBAAyBM,IAAI,CAACA,IAA9B,GAAlB,CACAH,OAAO,CAACG,IAAI,CAACJ,IAAN,CAAP,CACAL,OAAO,CAACa,MAAD,CAAP,CACA,CACD,CATF,EAUA,CAZD,CAeA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAK,CAC3B,MACCT,CAAAA,IAAI,CAAG,CAAP,EAAYA,IAAI,EAAIJ,KAApB,eACC,eAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAEW,QAA7C,uBAFF,CAKA,CAND,CASA/B,SAAS,CAAC,UAAK,CACd0B,IAAI,GACJG,mBAAmB,CAACX,IAAD,CAAOE,KAAP,CAAcP,SAAS,CAACH,OAAxB,CAAnB,CACA,CAHQ,CAGN,EAHM,CAAT,CAMA,GAAMwB,CAAAA,cAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACxB,OAAD,CAAUyB,QAAV,CAAuB,CAC5C;AACA,GAAML,CAAAA,UAAU,kBAAOjB,SAAP,CAAhB,CACAiB,UAAU,CAACpB,OAAX,CAAmByB,QAAnB,EAA+BzB,OAA/B,CAEA,GAAGyB,QAAQ,EAAG,OAAd,CAAsB,CACrB,GAAIC,CAAAA,WAAW,CAAGC,WAAW,CAAC3B,OAAD,CAA7B,CACAoB,UAAU,CAACpB,OAAX,CAAmByB,QAAnB,EAA+BC,WAA/B,CACA,CAEDP,mBAAmB,CAAChB,SAAS,CAACH,OAAX,CAAnB,CACAI,WAAW,CAACgB,UAAD,CAAX,CACA,CAZD,CAcA,GAAMO,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,KAAK,CAAG,CAC3B,GAAMV,CAAAA,IAAI,CAAGrB,MAAb,CACA,GAAIgC,CAAAA,KAAK,CAAG,EAAZ,CAEA,IAAI,GAAIC,CAAAA,GAAR,GAAeZ,CAAAA,IAAf,CAAoB,CACnB,GAAGA,IAAI,CAACY,GAAD,CAAJ,CAAUC,GAAV,GAAkBC,QAAQ,CAACJ,KAAD,CAA7B,CAAqC,CACpCC,KAAK,CAAGX,IAAI,CAACY,GAAD,CAAJ,CAAUD,KAAlB,CACA,CACD,CACD,MAAOA,CAAAA,KAAP,CACA,CAVD,CAcA,mBAEC,MAAC,MAAD,EAAQ,KAAK,CAAC,UAAd,CAAyB,WAAW,CAAC,uBAArC,wBAEA,uCACE,oCADF,cAEE,aACC,IAAI,CAAC,aADN,CAEC,OAAO,CAAC,oBAFT,EAFF,cAOE,aACC,IAAI,CAAC,UADN,CAEC,OAAO,CAAC,6FAFT,EAPF,GAFA,cAeC,YAAK,SAAS,CAAC,SAAf,CAAyB,KAAK,CAAE,CAACI,eAAe,CAAE,OAAlB,CAAhC,uBACC,aAAK,SAAS,CAAC,UAAf,wBACC,aAAK,SAAS,CAAC,WAAf,wBACC,oCACC,WAAI,KAAK,CAAE,CAACC,QAAQ,CAAE,MAAX,CAAX,kCADD,cAEC,iCACC,KAAC,QAAD,EAAU,UAAU,CAAEjC,UAAtB,CACC,aAAa,CAAE,uBAAAD,OAAO,QACrBwB,CAAAA,cAAa,CAACxB,OAAD,CAAU,UAAV,CADQ,EADvB,EADD,EAFD,GADD,cAYC,oCACC,WAAI,KAAK,CAAE,CAACkC,QAAQ,CAAE,MAAX,CAAX,6BADD,cAEC,YAAK,KAAK,CAAE,CAAEC,WAAW,CAAE,MAAf,CAAZ,uBACA,KAAC,QAAD,EAAU,MAAM,CAAEtC,MAAlB,CACC,aAAa,CAAE,uBAAAG,OAAO,QACrBwB,CAAAA,cAAa,CAACxB,OAAD,CAAU,OAAV,CADQ,EADvB,EADA,EAFD,GAZD,GADD,cA2BC,aAAK,SAAS,CAAC,SAAf,WACGY,eAAe,CAACwB,GAAhB,CAAoB,SAACC,OAAD,CAAUC,CAAV,qBACpB,YAAK,SAAS,CAAC,UAAf,uBACC,KAAC,IAAD,EAAc,OAAO,CAAED,OAAvB,EAAWC,CAAX,CADD,EADoB,EAApB,CADH,CAMEf,cAAc,EANhB,GA3BD,GADD,EAfD,GAFD,CAyDA,CA3JD,CA6JA,cAAexB,CAAAA,IAAf","sourcesContent":["import React, {useState, useEffect} from \"react\"\r\nimport {Link} from \"react-router-dom\"\r\nimport Layout from \"./Layout\"\r\nimport {getCategories, getFilteredProducts} from \"./ApiCore\"\r\nimport Checkbox from \"./Checkbox\"\r\nimport RadioBox from \"./RadioBox\"\r\nimport {prices} from \"./FixedPrices\"\r\nimport Card from \"./Card\"\r\nimport \"./Shop.css\";\r\n\r\n\r\n\r\nconst Shop = () =>{\r\n\tconst [myFilters, setMyFilter] = useState({\r\n\t\tfilters: {\r\n\t\t\tcategories: [],\r\n\t\t\tprice: []\r\n\t\t}\r\n\t})\r\n\tconst [categories, setCategories] = useState([])\r\n\tconst [error, setError] = useState(false)\r\n\tconst [skip, setSkip] = useState(0)\r\n\tconst [limit, setLimit] = useState(6)\r\n\tconst [filteredResults, setFilteredResults] = useState([])\r\n\tconst [size, setSize] = useState(0)\r\n\r\n\tconst init = () => {\r\n\t\tgetCategories()\r\n\t\t\t.then(data =>{\r\n\t\t\t\tif(error.data){\r\n\t\t\t\t\tsetError(error.data)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetCategories(data)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst loadFilteredResults = newFilters =>{\r\n\t\tgetFilteredProducts(skip, limit, newFilters)\r\n\t\t\t.then(data =>{\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\tsetError(data.error)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetFilteredResults(data.data)\r\n\t\t\t\t\tsetSize(data.size)\r\n\t\t\t\t\tsetSkip(0)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\r\n\r\n\tconst loadMore = newFilters =>{\r\n\t\tlet toSkip = skip + limit;\r\n\t\tgetFilteredProducts(toSkip, limit, myFilters.filters)\r\n\t\t\t.then(data =>{\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\tsetError(data.error)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetFilteredResults([...filteredResults, ...data.data])\r\n\t\t\t\t\tsetSize(data.size)\r\n\t\t\t\t\tsetSkip(toSkip)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\r\n\tconst loadMoreButton = () =>{\r\n\t\treturn(\r\n\t\t\tsize > 0 && size >= limit && (\r\n\t\t\t\t<button className=\"btn btn-primary\" onClick={loadMore}>Load More</button>\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\r\n\r\n\tuseEffect(() =>{\r\n\t\tinit();\r\n\t\tloadFilteredResults(skip, limit, myFilters.filters)\r\n\t}, [])\r\n\r\n\r\n\tconst handleFilters = (filters, filterBy) => {\r\n\t\t// console.log(\"SHOP\", filters, FilterBy)\r\n\t\tconst newFilters = {...myFilters}\r\n\t\tnewFilters.filters[filterBy] = filters\r\n\r\n\t\tif(filterBy ==\"price\"){\r\n\t\t\tlet priceValues = handlePrice(filters)\r\n\t\t\tnewFilters.filters[filterBy] = priceValues\r\n\t\t}\r\n\r\n\t\tloadFilteredResults(myFilters.filters)\r\n\t\tsetMyFilter(newFilters)\r\n\t}\r\n\r\n\tconst handlePrice = value =>{\r\n\t\tconst data = prices;\r\n\t\tlet array = [];\r\n\r\n\t\tfor(let key in data){\r\n\t\t\tif(data[key]._id === parseInt(value)){\r\n\t\t\t\tarray = data[key].array\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\r\n\r\n\t\r\n\treturn(\r\n\r\n\t\t<Layout title=\"Homepage\" description=\"Node js Ecommerce App\" >\r\n\r\n\t\t<helmet>\r\n\t\t\t\t<title>Shop page</title>\r\n\t\t\t\t<meta \r\n\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\tcontent=\"Make shopping here\"  \r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<meta \r\n\t\t\t\t\tname=\"keywords\"\r\n\t\t\t\t\tcontent=\"Choose from our list of products and shop. Buy Shoes, Bags, Shirts, Underwears, Polo Jeans \"  \r\n\t\t\t\t/>\r\n\t\t\t</helmet>\r\n\r\n\t\t\t<div className=\"ShopRow\" style={{backgroundColor: \"white\"}}>\r\n\t\t\t\t<div className=\"ShopRow1\">\r\n\t\t\t\t\t<div className=\"filterDiv\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h4 style={{fontSize: \"27px\"}}>Filter By Categories</h4>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<Checkbox categories={categories} \r\n\t\t\t\t\t\t\t\t\thandleFilters={filters => \r\n\t\t\t\t\t\t\t\t\t\thandleFilters(filters, \"category\")\r\n\t\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h4 style={{fontSize: \"27px\"}}>Filter By Price</h4>\r\n\t\t\t\t\t\t\t<div style={{ paddingLeft: \"30px\"}}>\r\n\t\t\t\t\t\t\t<RadioBox prices={prices} \r\n\t\t\t\t\t\t\t\thandleFilters={filters => \r\n\t\t\t\t\t\t\t\t\thandleFilters(filters, \"price\")\r\n\t\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"cardRow\">\r\n\t\t\t\t\t\t\t{filteredResults.map((product, i )=>(\r\n\t\t\t\t\t\t\t\t<div className=\"cardRow2\">\r\n\t\t\t\t\t\t\t\t\t<Card key={i} product={product} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t{loadMoreButton()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\nexport default Shop"]},"metadata":{},"sourceType":"module"}