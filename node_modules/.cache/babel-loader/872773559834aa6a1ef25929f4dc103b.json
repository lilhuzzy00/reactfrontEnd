{"ast":null,"code":"import _slicedToArray from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,Redirect}from\"react-router-dom\";import Layout from\"../core/Layout\";import{isAuthenticated}from\"../auth\";import{getProducts,getProduct,deleteProduct}from\"./ApiAdmin\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ManageProducts=function ManageProducts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var loadProducts=function loadProducts(){getProducts().then(function(data){if(data.error){console.log(data.error);}else{setProducts(data);}});};var destroy=function destroy(productId){deleteProduct(productId,user._id,token).then(function(data){if(data.error){console.log(data.error);}else{loadProducts();}});};useEffect(function(){loadProducts();},[]);return/*#__PURE__*/_jsx(Layout,{title:\"Homepage\",description:\"Node js Ecommerce App\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center\",style:{color:\"white\"},children:[\"You have a total \",products.length,\" items \"]}),products.map(function(p,i){return/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"strong\",{children:p.name}),/*#__PURE__*/_jsx(Link,{to:\"/admin/product/update/\".concat(p._id),children:/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-warning badge-pill\",style:{color:\"black\"},children:\"Update\"})}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return destroy(p._id);},className:\"badge badge-danger badge-pill\",style:{color:\"red\"},children:\"Delete\"})]},i);})]})})})});};export default ManageProducts;","map":{"version":3,"sources":["C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/src/Admin/ManageProducts.js"],"names":["React","useState","useEffect","Link","Redirect","Layout","isAuthenticated","getProducts","getProduct","deleteProduct","ManageProducts","products","setProducts","user","token","loadProducts","then","data","error","console","log","destroy","productId","_id","color","length","map","p","i","name"],"mappings":"gKAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,IAAR,CAAcC,QAAd,KAA6B,kBAA7B,CACA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CACA,OAAQC,eAAR,KAA8B,SAA9B,CACA,OAAQC,WAAR,CAAqBC,UAArB,CAAiCC,aAAjC,KAAqD,YAArD,C,wFAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC5B,cAAgCT,QAAQ,CAAC,EAAD,CAAxC,wCAAOU,QAAP,eAAiBC,WAAjB,eAEA,qBAAsBN,eAAe,EAArC,CAAOO,IAAP,kBAAOA,IAAP,CAAaC,KAAb,kBAAaA,KAAb,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAK,CACzBR,WAAW,GACTS,IADF,CACO,SAAAC,IAAI,CAAG,CACZ,GAAGA,IAAI,CAACC,KAAR,CAAc,CACbC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB,EACA,CAFD,IAEO,CACNN,WAAW,CAACK,IAAD,CAAX,CACA,CACD,CAPF,EAQA,CATD,CAWA,GAAMI,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,SAAD,CAAe,CAC9Bb,aAAa,CAACa,SAAD,CAAYT,IAAI,CAACU,GAAjB,CAAsBT,KAAtB,CAAb,CACEE,IADF,CACO,SAAAC,IAAI,CAAG,CACZ,GAAGA,IAAI,CAACC,KAAR,CAAc,CACbC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB,EACA,CAFD,IAEO,CACNH,YAAY,GACZ,CACD,CAPF,EAQA,CATD,CAWAb,SAAS,CAAC,UAAI,CACba,YAAY,GACZ,CAFQ,CAEN,EAFM,CAAT,CAKA,mBACC,KAAC,MAAD,EAAQ,KAAK,CAAC,UAAd,CAAyB,WAAW,CAAC,uBAArC,uBACC,YAAK,SAAS,CAAC,KAAf,uBACC,YAAK,SAAS,CAAC,QAAf,uBACC,YAAI,SAAS,CAAC,YAAd,wBACC,YAAI,SAAS,CAAC,aAAd,CAA4B,KAAK,CAAE,CAACS,KAAK,CAAE,OAAR,CAAnC,+BAAuEb,QAAQ,CAACc,MAAhF,aADD,CAEEd,QAAQ,CAACe,GAAT,CAAa,SAACC,CAAD,CAAIC,CAAJ,qBACb,YAAY,SAAS,CAAC,mEAAtB,wBACC,wBAASD,CAAC,CAACE,IAAX,EADD,cAEC,KAAC,IAAD,EAAM,EAAE,iCAA2BF,CAAC,CAACJ,GAA7B,CAAR,uBACC,aAAM,SAAS,CAAC,gCAAhB,CAAiD,KAAK,CAAE,CAACC,KAAK,CAAE,OAAR,CAAxD,oBADD,EAFD,cAKC,aACC,OAAO,CAAE,yBAAKH,CAAAA,OAAO,CAACM,CAAC,CAACJ,GAAH,CAAZ,EADV,CAEC,SAAS,CAAC,+BAFX,CAE2C,KAAK,CAAE,CAACC,KAAK,CAAE,KAAR,CAFlD,oBALD,GAASI,CAAT,CADa,EAAb,CAFF,GADD,EADD,EADD,EADD,CA0BA,CA1DD,CA4DA,cAAelB,CAAAA,cAAf","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {Link, Redirect} from \"react-router-dom\";\r\nimport Layout from \"../core/Layout\";\r\nimport {isAuthenticated} from \"../auth\";\r\nimport {getProducts, getProduct, deleteProduct} from \"./ApiAdmin\";\r\n\r\nconst ManageProducts = () => {\r\n\tconst [products, setProducts] = useState([]);\r\n\r\n\tconst {user, token} = isAuthenticated();\r\n\r\n\tconst loadProducts = () =>{\r\n\t\tgetProducts()\r\n\t\t\t.then(data =>{\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\tconsole.log(data.error)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetProducts(data)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst destroy = (productId) => {\r\n\t\tdeleteProduct(productId, user._id, token)\r\n\t\t\t.then(data =>{\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\tconsole.log(data.error)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tloadProducts()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tloadProducts()\r\n\t}, [])\r\n\r\n\r\n\treturn(\r\n\t\t<Layout title=\"Homepage\" description=\"Node js Ecommerce App\">\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t<ul className=\"list-group\">\r\n\t\t\t\t\t\t<h2 className=\"text-center\" style={{color: \"white\"}}>You have a total {products.length} items </h2>\r\n\t\t\t\t\t\t{products.map((p, i)=>(\r\n\t\t\t\t\t\t\t<li key={i} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t<strong>{p.name}</strong>\r\n\t\t\t\t\t\t\t\t<Link to={`/admin/product/update/${p._id}`}>\r\n\t\t\t\t\t\t\t\t\t<span className=\"badge badge-warning badge-pill\" style={{color: \"black\"}}>Update</span>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<span \r\n\t\t\t\t\t\t\t\t\tonClick={()=> destroy(p._id)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"badge badge-danger badge-pill\" style={{color: \"red\"}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\r\n\t)\r\n}\r\n\r\nexport default ManageProducts"]},"metadata":{},"sourceType":"module"}