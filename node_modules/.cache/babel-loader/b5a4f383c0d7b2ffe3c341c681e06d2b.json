{"ast":null,"code":"import _slicedToArray from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Layout from\"../core/Layout\";import{isAuthenticated}from\"../auth\";import{Link}from\"react-router-dom\";import{getPurchaseHistory}from\"./ApiUser\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),history=_useState2[0],setHistory=_useState2[1];var _isAuthenticated=isAuthenticated(),_isAuthenticated$user=_isAuthenticated.user,_id=_isAuthenticated$user._id,name=_isAuthenticated$user.name,email=_isAuthenticated$user.email,role=_isAuthenticated$user.role;var token=isAuthenticated().token;var init=function init(userId,token){getPurchaseHistory(userId,token).then(function(data){if(data.error){console.log(data.error);}else{setHistory(data);}});};useEffect(function(){init(_id,token);},[]);var userInfo=function userInfo(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-5 mt-5 \",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-header\",children:\"User Information\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:name}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:email}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:role===1?\"Admin\":\"Registered User\"})]})]});};var purchaseHistory=function purchaseHistory(history){return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-header\",children:\"Purchase history\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:history.map(function(h,i){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"hr\",{}),h.products.map(function(p,i){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h6\",{children:[\"Product name: \",p.name]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Product price: $\",p.price]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Purchased date:\",\" \",moment(p.createdAt).fromNow()]})]},i);})]});})})})]});};var userLink=function userLink(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-5 mt-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-header\",children:\"User Link\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/cart\",className:\"nav-link\",children:\"Cart\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(_id),className:\"nav-link\",children:\"Update Profile\"})})]})]});};return/*#__PURE__*/_jsx(Layout,{title:\"Howdy \".concat(name),Description:\"User Dashboard\",className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:userLink()}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[userInfo(),purchaseHistory(history)]})]})});};export default Dashboard;","map":{"version":3,"sources":["C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/src/user/UserDashboard.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","getPurchaseHistory","moment","Dashboard","history","setHistory","user","_id","name","email","role","token","init","userId","then","data","error","console","log","userInfo","purchaseHistory","map","h","i","products","p","price","createdAt","fromNow","userLink"],"mappings":"gKAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAwBC,SAAxB,KAAwC,OAAxC,CACA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CACA,OAAQC,eAAR,KAA8B,SAA9B,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAAQC,kBAAR,KAAiC,WAAjC,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAK,CACtB,cAA8BP,QAAQ,CAAC,EAAD,CAAtC,wCAAOQ,OAAP,eAAgBC,UAAhB,eAEA,qBAA6CN,eAAe,EAA5D,wCAAQO,IAAR,CAAgBC,GAAhB,uBAAgBA,GAAhB,CAAqBC,IAArB,uBAAqBA,IAArB,CAA2BC,KAA3B,uBAA2BA,KAA3B,CAAkCC,IAAlC,uBAAkCA,IAAlC,CACA,GAAMC,CAAAA,KAAK,CAAGZ,eAAe,GAAGY,KAAhC,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,MAAD,CAASF,KAAT,CAAmB,CAC/BV,kBAAkB,CAACY,MAAD,CAASF,KAAT,CAAlB,CACEG,IADF,CACO,SAAAC,IAAI,CAAI,CACb,GAAGA,IAAI,CAACC,KAAR,CAAc,CACbC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB,EACA,CAFD,IAGK,CACJX,UAAU,CAACU,IAAD,CAAV,CACA,CACD,CARF,EASA,CAVD,CAaAlB,SAAS,CAAC,UAAI,CACbe,IAAI,CAACL,GAAD,CAAMI,KAAN,CAAJ,CACA,CAFQ,CAEP,EAFO,CAAT,CAIA,GAAMQ,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,sBAChB,aAAK,SAAS,CAAC,iBAAf,wBACC,WAAI,SAAS,CAAC,aAAd,8BADD,cAEE,YAAI,SAAS,CAAC,YAAd,wBACC,WAAI,SAAS,CAAC,iBAAd,UAAiCX,IAAjC,EADD,cAEC,WAAI,SAAS,CAAC,iBAAd,UAAiCC,KAAjC,EAFD,cAGC,WAAI,SAAS,CAAC,iBAAd,UAAiCC,IAAI,GAAK,CAAT,CAAa,OAAb,CAAuB,iBAAxD,EAHD,GAFF,GADgB,EAAjB,CAWA,GAAMU,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAhB,OAAO,CAAI,CAChC,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,WAAI,SAAS,CAAC,aAAd,8BADJ,cAEI,WAAI,SAAS,CAAC,YAAd,uBACI,WAAI,SAAS,CAAC,iBAAd,UACKA,OAAO,CAACiB,GAAR,CAAY,SAACC,CAAD,CAAIC,CAAJ,CAAU,CACnB,mBACI,oCACI,aADJ,CAEKD,CAAC,CAACE,QAAF,CAAWH,GAAX,CAAe,SAACI,CAAD,CAAIF,CAAJ,CAAU,CACtB,mBACI,oCACI,uCAAmBE,CAAC,CAACjB,IAArB,GADJ,cAEI,yCAAqBiB,CAAC,CAACC,KAAvB,GAFJ,cAGI,wCACoB,GADpB,CAEKxB,MAAM,CAACuB,CAAC,CAACE,SAAH,CAAN,CAAoBC,OAApB,EAFL,GAHJ,GAAUL,CAAV,CADJ,CAUH,CAXA,CAFL,GADJ,CAiBH,CAlBA,CADL,EADJ,EAFJ,GADJ,CA4BH,CA7BA,CA+BA,GAAMM,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,sBAChB,aAAK,SAAS,CAAC,gBAAf,wBACC,WAAI,SAAS,CAAC,aAAd,uBADD,cAEE,YAAI,SAAS,CAAC,YAAd,wBACC,WAAI,SAAS,CAAC,iBAAd,uBACC,KAAC,IAAD,EAAM,EAAE,CAAC,OAAT,CAAiB,SAAS,CAAC,UAA3B,kBADD,EADD,cAKC,WAAI,SAAS,CAAC,iBAAd,uBACC,KAAC,IAAD,EAAM,EAAE,oBAActB,GAAd,CAAR,CAA6B,SAAS,CAAC,UAAvC,4BADD,EALD,GAFF,GADgB,EAAjB,CAeA,mBACC,KAAC,MAAD,EAAQ,KAAK,iBAAWC,IAAX,CAAb,CAAgC,WAAW,CAAC,gBAA5C,CAA6D,SAAS,CAAC,iBAAvE,uBAEC,aAAK,SAAS,CAAC,KAAf,wBACC,YAAK,SAAS,CAAC,UAAf,UACEqB,QAAQ,EADV,EADD,cAKC,aAAK,SAAS,CAAC,UAAf,WACEV,QAAQ,EADV,CAEEC,eAAe,CAAChB,OAAD,CAFjB,GALD,GAFD,EADD,CAiBA,CAjGD,CAmGA,cAAeD,CAAAA,SAAf","sourcesContent":["import React,{useState, useEffect} from \"react\"\r\nimport Layout from \"../core/Layout\"\r\nimport {isAuthenticated} from \"../auth\"\r\nimport {Link} from \"react-router-dom\"\r\nimport {getPurchaseHistory} from \"./ApiUser\"\r\nimport moment from \"moment\"\r\n\r\nconst Dashboard = () =>{\r\n\tconst [history, setHistory] = useState([])\r\n\r\n\tconst { user: { _id, name, email, role } } = isAuthenticated();\r\n\tconst token = isAuthenticated().token;\r\n\r\n\tconst init = (userId, token) => {\r\n\t\tgetPurchaseHistory(userId, token)\r\n\t\t\t.then(data => {\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\tconsole.log(data.error)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsetHistory(data)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\r\n\tuseEffect(()=>{\r\n\t\tinit(_id, token)\r\n\t},[])\r\n\r\n\tconst userInfo = () =>(\r\n\t\t<div className=\"card mb-5 mt-5 \">\r\n\t\t\t<h4 className=\"card-header\">User Information</h4>\r\n\t\t\t\t<ul className=\"list-group\">\r\n\t\t\t\t\t<li className=\"list-group-item\">{name}</li>\r\n\t\t\t\t\t<li className=\"list-group-item\">{email}</li>\r\n\t\t\t\t\t<li className=\"list-group-item\">{role === 1 ? \"Admin\" : \"Registered User\" }</li>\r\n\t\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst purchaseHistory = history => {\r\n    return (\r\n        <div className=\"card mb-5\">\r\n            <h3 className=\"card-header\">Purchase history</h3>\r\n            <ul className=\"list-group\">\r\n                <li className=\"list-group-item\">\r\n                    {history.map((h, i) => {\r\n                        return (\r\n                            <div>\r\n                                <hr />\r\n                                {h.products.map((p, i) => {\r\n                                    return (\r\n                                        <div key={i}>\r\n                                            <h6>Product name: {p.name}</h6>\r\n                                            <h6>Product price: ${p.price}</h6>\r\n                                            <h6>\r\n                                                Purchased date:{\" \"}\r\n                                                {moment(p.createdAt).fromNow()}\r\n                                            </h6>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\n\tconst userLink = () =>(\r\n\t\t<div className=\"card mb-5 mt-5\">\r\n\t\t\t<h4 className=\"card-header\">User Link</h4>\r\n\t\t\t\t<ul className=\"list-group\">\r\n\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t<Link to=\"/cart\" className=\"nav-link\">Cart</Link>\r\n\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t<Link to={`/profile/${_id}`} className=\"nav-link\">Update Profile</Link>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn(\r\n\t\t<Layout title={`Howdy ${name}`} Description=\"User Dashboard\" className=\"container-fluid\">\r\n\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<div className=\"col-md-3\">\r\n\t\t\t\t\t{userLink()}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"col-md-9\">\r\n\t\t\t\t\t{userInfo()}\r\n\t\t\t\t\t{purchaseHistory(history)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</Layout>\r\n\r\n\t)\r\n}\r\n\r\nexport default Dashboard"]},"metadata":{},"sourceType":"module"}