{"ast":null,"code":"import _defineProperty from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Redirect}from\"react-router-dom\";import Layout from\"../core/Layout\";import{isAuthenticated}from\"../auth\";import{read,update,updateUser}from\"./ApiUser\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var match=_ref.match;var _useState=useState({name:\"\",email:\"\",password:\"\",error:false,success:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _isAuthenticated=isAuthenticated(),token=_isAuthenticated.token;var name=values.name,email=values.email,password=values.password,error=values.error,success=values.success;var init=function init(userId){read(userId,token).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:true}));}else{setValues(_objectSpread(_objectSpread({},values),{},{name:data.name,email:data.email}));}});};useEffect(function(){init(match.params.userId);},[]);var handleChange=function handleChange(name){return function(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},name,e.target.value)));};};var clickSubmit=function clickSubmit(e){e.preventDefault();update(match.params.userId,token,{name:name,email:email,password:password}).then(function(data){if(data.error){console.log(data.error);}else{updateUser(data,function(){setValues(_objectSpread(_objectSpread({},values),{},{name:data.name,email:data.email,success:true}));});}});};var redirectUser=function redirectUser(success){if(success){return/*#__PURE__*/_jsx(Redirect,{to:\"/cart\"});}};var profileUpdate=function profileUpdate(name,email,password){return/*#__PURE__*/_jsxs(\"form\",{style:{marginTop:\"20px\",marginBottom:\"20px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:\"white\"},children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange(\"name\"),type:\"text\",className:\"form-control\",value:name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:\"white\"},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange(\"email\"),type:\"email\",className:\"form-control\",value:email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:\"white\"},children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange(\"password\"),type:\"password\",className:\"form-control\",value:password})]}),/*#__PURE__*/_jsx(\"button\",{onClick:clickSubmit,type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})]});};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-4 offset-4\",children:[profileUpdate(name,email,password),redirectUser(success)]})})});};export default Profile;","map":{"version":3,"sources":["C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/src/user/Profile.js"],"names":["React","useState","useEffect","Redirect","Layout","isAuthenticated","read","update","updateUser","Profile","match","name","email","password","error","success","values","setValues","token","init","userId","then","data","params","handleChange","e","target","value","clickSubmit","preventDefault","console","log","redirectUser","profileUpdate","marginTop","marginBottom","color"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\r\nimport {Redirect} from \"react-router-dom\"\r\nimport Layout from \"../core/Layout\"\r\nimport {isAuthenticated} from \"../auth\"\r\nimport {read, update, updateUser} from \"./ApiUser\"\r\n\r\n\r\nconst Profile = ({match}) => {\r\n\tconst [values, setValues] = useState({\r\n\t\tname: \"\",\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\terror: false,\r\n\t\tsuccess: false\r\n\t})\r\n\r\n\tconst {token} = isAuthenticated();\r\n\tconst {name, email, password, error, success} = values;\r\n\r\n\tconst init = (userId) => {\r\n\t\tread(userId, token)\r\n\t\t\t.then(data => {\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\tsetValues({...values, error: true})\r\n\t\t\t\t}else {\r\n\t\t\t\t\tsetValues({...values, name: data.name, email: data.email})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tinit(match.params.userId)\r\n\t}, [])\r\n\r\n\tconst handleChange = name => e =>{\r\n\t\tsetValues({...values, error: false, [name]: e.target.value})\r\n\r\n\t}\r\n\r\n\tconst clickSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tupdate(match.params.userId, token, {name, email, password})\r\n\t\t\t.then(data => {\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\tconsole.log(data.error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tupdateUser(data, () => {\r\n\t\t\t\t\t\tsetValues({\r\n\t\t\t\t\t\t\t...values, \r\n\t\t\t\t\t\t\tname: data.name, \r\n\t\t\t\t\t\t\temail: data.email, \r\n\t\t\t\t\t\t\tsuccess: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst redirectUser = (success) => {\r\n\t\tif(success){\r\n\t\t\treturn <Redirect to=\"/cart\" />\r\n\t\t}\r\n\t}\r\n\r\n\tconst profileUpdate = (name, email, password) => (\r\n\t\t<form style={{marginTop: \"20px\", marginBottom: \"20px\"}}>\r\n\t\t\t\t  <div className=\"form-group mb-3\">\r\n\t\t\t\t\t    <label className=\"form-label\" style={{color: \"white\"}}>Name</label>\r\n\t\t\t\t\t    <input onChange={handleChange(\"name\")} type=\"text\" className=\"form-control\" value={name} />\r\n\t\t\t\t  </div>\r\n\r\n\t\t\t\t  <div className=\"form-group mb-3\">\r\n\t\t\t\t\t    <label className=\"form-label\" style={{color: \"white\"}}>Email</label>\r\n\t\t\t\t\t    <input onChange={handleChange(\"email\")} type=\"email\" className=\"form-control\" value={email} />\r\n\t\t\t\t  </div>\r\n\r\n\t\t\t\t  <div className=\"form-group mb-3\">\r\n\t\t\t\t\t    <label className=\"form-label\" style={{color: \"white\"}}>Password</label>\r\n\t\t\t\t\t    <input onChange={handleChange(\"password\")} type=\"password\" className=\"form-control\"  value={password}/>\r\n\t\t\t\t  </div>\r\n\r\n\t\t\t\t  <button onClick={clickSubmit} type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n\t\t</form>\r\n\r\n\t)\r\n\r\n\t\treturn (\r\n\t\t\t<Layout>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-4 offset-4\">\r\n\t\t\t\t\t\t{profileUpdate(name, email, password)}\r\n\t\t\t\t\t\t{redirectUser(success)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Layout>\r\n\t\t)\r\n\t\r\n}\r\n\r\n\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}