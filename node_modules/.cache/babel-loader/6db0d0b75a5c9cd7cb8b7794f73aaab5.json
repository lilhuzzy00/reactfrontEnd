{"ast":null,"code":"import _slicedToArray from\"C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Layout from\"../core/Layout\";import{isAuthenticated}from\"../auth\";import{listOrders,getStatusValues,updateOrderStatus}from\"./ApiAdmin\";import moment from\"moment\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Orders=function Orders(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),statusValues=_useState4[0],setStatusValues=_useState4[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var loadOrders=function loadOrders(){listOrders(user._id,token).then(function(data){if(data.error){console.log(data.error);}else{setOrders(data);}});};useEffect(function(){loadOrders();},[]);var loadStatusValues=function loadStatusValues(){getStatusValues(user._id,token).then(function(data){if(data.error){console.log(data.error);}else{setStatusValues(data);}});};useEffect(function(){loadOrders();loadStatusValues();},[]);var showOrdersLength=function showOrdersLength(){if(orders.length>0){return/*#__PURE__*/_jsxs(\"h1\",{className:\"text-danger display-2\",children:[\"Total order is: \",orders.length]});}else{return/*#__PURE__*/_jsx(\"h1\",{className:\"text-danger\",children:\"No orders found\"});}};var showInput=function showInput(key,value){return/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-2 mr-sm-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-group-text\",children:key})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:value,className:\"form-control\",readOnly:true})]});};var handlesStatusChange=function handlesStatusChange(e,orderId){updateOrderStatus(user._id,token,orderId,e.target.value).then(function(data){if(data.error){console.log(\"status update failed\");}else{loadOrders();}});};var showStatus=function showStatus(o){return/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"mark mb-4\",children:[\"Status: \",o.status]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",onChange:function onChange(e){return handlesStatusChange(e,o._id);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Status Update\"}),statusValues.map(function(status,index){return/*#__PURE__*/_jsx(\"option\",{value:status,children:status},index);})]})]});};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 offset-md-2\",children:[showOrdersLength(),orders.map(function(o,oIndex){return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",style:{borderBottom:\"1px solid white\"},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-5\",style:{color:\"white\"},children:/*#__PURE__*/_jsxs(\"span\",{className:\"bg-primary\",children:[\"Order ID: \",o._id]})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group mb-2\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item\",children:showStatus(o)}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Transaction:\"}),\" \",o.transaction_id]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount: \"}),\" \\u20A6\",o.amount]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ordered By:\"}),\" \",o.user.name]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ordered Date:\"}),\" \",moment(o.createdAt).fromNow()]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Delivery Address:\"}),\" \",o.address]})]}),/*#__PURE__*/_jsxs(\"h2\",{style:{color:\"white\"},children:[\"Total number of products Order are: \",o.products.length]}),o.products.map(function(p,pIndex){return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",style:{padding:\"20px\",border:\"2px solid white\"},children:[showInput(\"Product name\",p.name),showInput(\"Product name\",p.price),showInput(\"Product name\",p.count),showInput(\"Product name\",p._id)]},pIndex);})]},oIndex);})]})})});};export default Orders;","map":{"version":3,"sources":["C:/Users/GOD'SPOWER/Desktop/reactfrontEnd/src/Admin/Orders.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","listOrders","getStatusValues","updateOrderStatus","moment","Orders","orders","setOrders","statusValues","setStatusValues","user","token","loadOrders","_id","then","data","error","console","log","loadStatusValues","showOrdersLength","length","showInput","key","value","handlesStatusChange","e","orderId","target","showStatus","o","status","map","index","oIndex","borderBottom","color","transaction_id","amount","name","createdAt","fromNow","address","products","p","pIndex","padding","border","price","count"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\r\nimport Layout from \"../core/Layout\"\r\nimport {isAuthenticated} from \"../auth\"\r\nimport { listOrders, getStatusValues, updateOrderStatus } from \"./ApiAdmin\"\r\nimport moment from \"moment\"\r\n\r\nconst Orders = () => {\r\n\tconst [orders, setOrders] = useState([]);\r\n\tconst [statusValues, setStatusValues] = useState([]);\r\n\r\n\tconst {user, token} = isAuthenticated()\r\n\r\n\tconst loadOrders = () => {\r\n\t\tlistOrders(user._id, token).then(data =>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tsetOrders(data)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tloadOrders()\r\n\t},[]);\r\n\r\n\r\nconst loadStatusValues = () => {\r\n\t\tgetStatusValues(user._id, token).then(data =>{\r\n\t\t\tif(data.error){\r\n\t\t\t\tconsole.log(data.error);\r\n\t\t\t} else {\r\n\t\t\t\tsetStatusValues(data)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tloadOrders()\r\n\t\tloadStatusValues()\r\n\t},[]);\r\n\r\n\r\n\r\n\r\n\tconst showOrdersLength = () => {\r\n\t\tif(orders.length > 0){\r\n\t\t\treturn <h1 className=\"text-danger display-2\">Total order is: {orders.length}</h1>\r\n\t\t} else {\r\n\t\t\treturn <h1 className=\"text-danger\">No orders found</h1>\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst showInput = (key, value) =>(\r\n\t\t<div className=\"input-group mb-2 mr-sm-2\">\r\n\t\t\t<div className=\"input-group-prepend\">\r\n\t\t\t\t<div className=\"input-group-text\">{key}</div>\r\n\t\t\t</div>\r\n\t\t\t<input type=\"text\" value={value} className=\"form-control\" readOnly />\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst handlesStatusChange = (e, orderId) => {\r\n\t\tupdateOrderStatus(user._id, token, orderId, e.target.value)\r\n\t\t\t.then(data=> {\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\tconsole.log(\"status update failed\")\r\n\t\t\t\t} else{\r\n\t\t\t\t\tloadOrders();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst showStatus = (o) =>(\r\n\t\t<div className=\"form-control\">\r\n\t\t\t<h3 className=\"mark mb-4\">Status: {o.status}</h3>\r\n\t\t\t<select className=\"form-control\" onChange={e=> handlesStatusChange(e, o._id)}>\r\n\t\t\t\t<option>Status Update</option>\r\n\t\t\t\t{statusValues.map((status, index)=>(\r\n\t\t\t\t\t<option key={index} value={status}>{status}</option>\r\n\t\t\t\t))}\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn(\r\n\t\t<Layout>\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<div className=\"col-md-8 offset-md-2\">\r\n\t\t\t\t\t{showOrdersLength()}\r\n\t\t\t\t\t{orders.map((o, oIndex)=>(\r\n\t\t\t\t\t\t<div key={oIndex} className=\"mt-5\" style={{borderBottom: \"1px solid white\"}}>\r\n\t\t\t\t\t\t\t<h2 className=\"mb-5\" style={{color: \"white\"}}>\r\n\t\t\t\t\t\t\t\t<span className=\"bg-primary\">\r\n\t\t\t\t\t\t\t\t\tOrder ID: {o._id}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<ul className=\"list-group mb-2\">\r\n\t\t\t\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t\t\t\t{showStatus(o)}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t\t\t\t<strong>Transaction:</strong> {o.transaction_id}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t\t\t\t<strong>Amount: </strong> ₦{o.amount}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t\t\t\t<strong>Ordered By:</strong> {o.user.name}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t\t\t\t<strong>Ordered Date:</strong> {moment(o.createdAt).fromNow()}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"list-group-item\">\r\n\t\t\t\t\t\t\t\t\t<strong>Delivery Address:</strong> {o.address}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t<h2 style={{color: \"white\"}}>Total number of products Order are: {o.products.length}</h2>\r\n\t\t\t\t\t\t\t{o.products.map((p, pIndex)=>(\r\n\t\t\t\t\t\t\t\t<div className=\"mb-4\" style={{padding: \"20px\", border: \"2px solid white\"}} key={pIndex}>\r\n\t\t\t\t\t\t\t\t\t{showInput(\"Product name\", p.name)}\r\n\t\t\t\t\t\t\t\t\t{showInput(\"Product name\", p.price)}\r\n\t\t\t\t\t\t\t\t\t{showInput(\"Product name\", p.count)}\r\n\t\t\t\t\t\t\t\t\t{showInput(\"Product name\", p._id)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\t)\r\n\r\n\r\n}\r\n\r\n\r\nexport default Orders;"]},"metadata":{},"sourceType":"module"}